{% extends 'base.html' %}

{% block content %}
{% load custom_filters %}

<h2>Favourite Articles</h2>
{% if user.is_authenticated %}
    <table>
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Creation date</th>
            <th>Synopsis</th>
            <th>Created</th>
        </tr>
        {% for article in favourites %}
        <tr>
            <td>{{ article.title }}</td>
            <td>{{ article.author }}</td>
            <td>{{ article.created }}</td>
            <td>{{ article.synopsis|truncatechars:20 }}</td>
            <td>{{ article.created|time_since_pub }}</td>
            {% if user.is_authenticated %}
                <td><a href="{% url 'article_detail' article.id %}">Show details</a></td>
            {% endif %}    
        </tr>
        {% empty %}
        <tr>
            <td colspan="4">There are no favourite articles</td>
        </tr>
        {% endfor %}
    </table>
{% else %}
    <p>Veuillez vous <a href="{% url 'login' %}">connecter</a> pour accéder à vos articles favoris.</p>
{% endif %}
{% endblock %}